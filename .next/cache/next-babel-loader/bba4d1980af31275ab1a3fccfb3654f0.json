{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport axios from '../../axios-orders';\nimport setAuthorizationToken from '../../utils/setAuthorization';\nimport jwt from 'jsonwebtoken';\nimport cookie from 'js-cookie';\nimport { SET_CURRENT_USER } from './types';\nexport function setCurrentUser(user) {\n  return {\n    type: SET_CURRENT_USER,\n    user: user\n  };\n}\nexport function userRegisterRequest(data) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var res, token, user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.post('/register', data);\n\n              case 2:\n                res = _context.sent;\n                token = res.data.token;\n                user = res.data.user;\n                cookie.set('jwtToken', token);\n                cookie.set('user', user);\n                setAuthorizationToken(token);\n                dispatch(setCurrentUser(jwt.decode(token)));\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n} // import axios from '../../axios-orders';\n// export function userRegisterRequest(userData) {\n//   return dispatch => {\n//     return axios.post('/register', userData);\n//   };\n// }","map":{"version":3,"sources":["/home/noah/Desktop/ninostyle-next-typescript/src/store/actions/RegisterActions.ts"],"names":["axios","setAuthorizationToken","jwt","cookie","SET_CURRENT_USER","setCurrentUser","user","type","userRegisterRequest","data","dispatch","post","res","token","set","decode"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,OAAOC,qBAAP,MAAkC,8BAAlC;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,gBAAT,QAAiC,SAAjC;AAEA,OAAO,SAASC,cAAT,CAAwBC,IAAxB,EAAmC;AACxC,SAAO;AACLC,IAAAA,IAAI,EAAEH,gBADD;AAELE,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID;AAED,OAAO,SAASE,mBAAT,CAA6BC,IAA7B,EAAwC;AAC7C;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACaV,KAAK,CAACW,IAAN,CAAW,WAAX,EAAwBF,IAAxB,CADb;;AAAA;AACCG,gBAAAA,GADD;AAECC,gBAAAA,KAFD,GAESD,GAAG,CAACH,IAAJ,CAASI,KAFlB;AAGCP,gBAAAA,IAHD,GAGQM,GAAG,CAACH,IAAJ,CAASH,IAHjB;AAILH,gBAAAA,MAAM,CAACW,GAAP,CAAW,UAAX,EAAuBD,KAAvB;AACAV,gBAAAA,MAAM,CAACW,GAAP,CAAW,MAAX,EAAmBR,IAAnB;AACAL,gBAAAA,qBAAqB,CAACY,KAAD,CAArB;AACAH,gBAAAA,QAAQ,CAACL,cAAc,CAACH,GAAG,CAACa,MAAJ,CAAWF,KAAX,CAAD,CAAf,CAAR;;AAPK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AASD,C,CAED;AAEA;AACA;AACA;AACA;AACA","sourcesContent":["import axios from '../../axios-orders';\nimport setAuthorizationToken from '../../utils/setAuthorization';\nimport jwt from 'jsonwebtoken';\nimport cookie from 'js-cookie';\nimport { SET_CURRENT_USER } from './types';\n\nexport function setCurrentUser(user: any) {\n  return {\n    type: SET_CURRENT_USER,\n    user\n  };\n}\n\nexport function userRegisterRequest(data: any) {\n  return async (dispatch: (arg0: { type: string; user: any }) => void) => {\n    const res = await axios.post('/register', data);\n    const token = res.data.token;\n    const user = res.data.user;\n    cookie.set('jwtToken', token);\n    cookie.set('user', user);\n    setAuthorizationToken(token);\n    dispatch(setCurrentUser(jwt.decode(token)));\n  };\n}\n\n// import axios from '../../axios-orders';\n\n// export function userRegisterRequest(userData) {\n//   return dispatch => {\n//     return axios.post('/register', userData);\n//   };\n// }\n"]},"metadata":{},"sourceType":"module"}