{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport axios from '../../axios-orders';\nimport setAuthorizationToken from '../../utils/setAuthorization';\nimport jwt from 'jsonwebtoken';\nimport cookie from 'js-cookie';\nimport { SET_CURRENT_USER } from './types';\nexport function setCurrentUser(user) {\n  return {\n    type: SET_CURRENT_USER,\n    user: user\n  };\n}\nexport function logout() {\n  return function (dispatch) {\n    cookie.remove('jwtToken');\n    setAuthorizationToken(false);\n    dispatch(setCurrentUser({}));\n  };\n}\nexport function login(data) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var res, token, user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.post('/login', data);\n\n              case 2:\n                res = _context.sent;\n                token = res.data.jwtToken;\n                user = res.data.user;\n                cookie.set('jwtToken', token);\n                cookie.set('user', user);\n                setAuthorizationToken(token);\n                dispatch(setCurrentUser(jwt.decode(token)));\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n}","map":{"version":3,"sources":["/home/noah/Desktop/ninostyle-next-typescript/src/store/actions/authActions.ts"],"names":["axios","setAuthorizationToken","jwt","cookie","SET_CURRENT_USER","setCurrentUser","user","type","logout","dispatch","remove","login","data","post","res","token","jwtToken","set","decode"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,OAAOC,qBAAP,MAAkC,8BAAlC;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,SAASC,gBAAT,QAAiC,SAAjC;AAEA,OAAO,SAASC,cAAT,CAAwBC,IAAxB,EAAkC;AACvC,SAAO;AACLC,IAAAA,IAAI,EAAEH,gBADD;AAELE,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID;AAED,OAAO,SAASE,MAAT,GAAkB;AACvB,SAAO,UAACC,QAAD,EAA0D;AAC/DN,IAAAA,MAAM,CAACO,MAAP,CAAc,UAAd;AACAT,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACAQ,IAAAA,QAAQ,CAACJ,cAAc,CAAC,EAAD,CAAf,CAAR;AACD,GAJD;AAKD;AAED,OAAO,SAASM,KAAT,CAAeC,IAAf,EAA0B;AAC/B;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,iBAAOH,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACaT,KAAK,CAACa,IAAN,CAAW,QAAX,EAAqBD,IAArB,CADb;;AAAA;AACCE,gBAAAA,GADD;AAECC,gBAAAA,KAFD,GAESD,GAAG,CAACF,IAAJ,CAASI,QAFlB;AAGCV,gBAAAA,IAHD,GAGQQ,GAAG,CAACF,IAAJ,CAASN,IAHjB;AAILH,gBAAAA,MAAM,CAACc,GAAP,CAAW,UAAX,EAAuBF,KAAvB;AACAZ,gBAAAA,MAAM,CAACc,GAAP,CAAW,MAAX,EAAmBX,IAAnB;AACAL,gBAAAA,qBAAqB,CAACc,KAAD,CAArB;AACAN,gBAAAA,QAAQ,CAACJ,cAAc,CAACH,GAAG,CAACgB,MAAJ,CAAWH,KAAX,CAAD,CAAf,CAAR;;AAPK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AASD","sourcesContent":["import axios from '../../axios-orders';\nimport setAuthorizationToken from '../../utils/setAuthorization';\nimport jwt from 'jsonwebtoken';\nimport cookie from 'js-cookie';\n\nimport { SET_CURRENT_USER } from './types';\n\nexport function setCurrentUser(user: {}) {\n  return {\n    type: SET_CURRENT_USER,\n    user\n  };\n}\n\nexport function logout() {\n  return (dispatch: (arg0: { type: string; user: {} }) => void) => {\n    cookie.remove('jwtToken');\n    setAuthorizationToken(false);\n    dispatch(setCurrentUser({}));\n  };\n}\n\nexport function login(data: any) {\n  return async (dispatch: (arg0: { type: string; user: {} }) => void) => {\n    const res = await axios.post('/login', data);\n    const token = res.data.jwtToken;\n    const user = res.data.user;\n    cookie.set('jwtToken', token);\n    cookie.set('user', user);\n    setAuthorizationToken(token);\n    dispatch(setCurrentUser(jwt.decode(token)));\n  };\n}\n"]},"metadata":{},"sourceType":"module"}